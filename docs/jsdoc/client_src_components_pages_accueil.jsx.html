<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: client/src/components/pages/accueil.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: client/src/components/pages/accueil.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState } from "react";
import { useNavigate } from "react-router-dom";

/**
 * Page d’accueil de l’application avec le formulaire de connexion.
 *
 * Le composant permet à un utilisateur de s’authentifier via l’API `/users/authenticate`:
 * - Lors de la soumission du formulaire, une requête POST est envoyée avec l’email et le mot de passe saisis.
 * - Si la réponse n’est pas valide, un message d’erreur est affiché.
 * - Si l’authentification réussit, le token JWT et les informations utilisateur sont stockés dans le `localStorage`.
 * - L’utilisateur est ensuite redirigé vers `/tableau_de_bord`.
 * 
 * @component
 * @returns {JSX.Element} La page d’accueil avec présentation et formulaire de connexion
 */
const Accueil = () => {
    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
    const [error, setError] = useState("");
    const navigate = useNavigate();

    const Authenticate = async(e) => {
      e.preventDefault();
      setError("");

      const response = await fetch("/users/authenticate", {
        method: "POST",
        headers: { "Content-Type": "application/json"},
        body: JSON.stringify({email, password})
      });

      const data = await response.json();

      if(!response.ok) {
        setError("Identifiants incorrects");
        return;
      }

      if(data.token) {
        localStorage.setItem("token", data.token);
        localStorage.setItem("user", JSON.stringify(data.user));
      }
      
      navigate("/tableau_de_bord");

    };

  return (
    &lt;main className="container">
      &lt;div className="text-center">
        &lt;h1>Accueil&lt;/h1>
      &lt;/div>
      &lt;div>
        &lt;div>
          &lt;h2>Présentation de l'application&lt;/h2>
          &lt;p>Cette application permet à la capitainerie du Port Russel de gérer ses utilisateurs, catways et réservations.&lt;/p>
          &lt;p>Une fois connecté, un utilisateur qui a les permissions pourra accéder à la liste des autres utilisateurs, des catways et des réservations. La personne pourra aussi modifier, ajouter ou supprimer des éléments de ces catégories.&lt;/p>
        &lt;/div>
        &lt;hr />
        &lt;div>
          &lt;h2>Connexion&lt;/h2>
          &lt;div>
            &lt;form onSubmit={Authenticate}>
                &lt;div className="mb-3">
                    &lt;label className="form-label">Adresse Email&lt;/label>
                    &lt;input type="email" className="form-control" value={email} onChange={(e) => setEmail(e.target.value)}/>
                &lt;/div>
                &lt;div className="mb-3">
                    &lt;label className="form-label">Mot de passe&lt;/label>
                    &lt;input type="password" className="form-control" id="passwordConnection"value={password} onChange={(e) => setPassword(e.target.value)}/>
                &lt;/div>
                {error &amp;&amp; &lt;p className="text-danger">{error}&lt;/p>}
                &lt;button type="submit" className="btn btn-primary">Se connecter&lt;/button>
            &lt;/form>            
          &lt;/div>
        &lt;/div>
        &lt;hr />
        &lt;div className="accordion-item">
            &lt;h2>Documentation de l'API&lt;/h2>
            &lt;a href="https://github.com/Paolina-coding/API-Port-Russel/">Cliquer pour afficher&lt;/a>
        &lt;/div>
      &lt;/div>      
    &lt;/main>
  );
};

export default Accueil;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Accueil">Accueil</a></li><li><a href="global.html#CatwayList">CatwayList</a></li><li><a href="global.html#Catways">Catways</a></li><li><a href="global.html#GetCatway">GetCatway</a></li><li><a href="global.html#GetReservation">GetReservation</a></li><li><a href="global.html#GetUser">GetUser</a></li><li><a href="global.html#ReservationList">ReservationList</a></li><li><a href="global.html#Reservations">Reservations</a></li><li><a href="global.html#ReservationsCatway">ReservationsCatway</a></li><li><a href="global.html#TableauDeBord">TableauDeBord</a></li><li><a href="global.html#UserList">UserList</a></li><li><a href="global.html#Utilisateurs">Utilisateurs</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#authenticate">authenticate</a></li><li><a href="global.html#delete">delete</a></li><li><a href="global.html#getAllReservations">getAllReservations</a></li><li><a href="global.html#getByEmail">getByEmail</a></li><li><a href="global.html#getById">getById</a></li><li><a href="global.html#getCurrentReservations">getCurrentReservations</a></li><li><a href="global.html#getList">getList</a></li><li><a href="global.html#update">update</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Jan 08 2026 20:31:54 GMT+0100 (heure normale d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
